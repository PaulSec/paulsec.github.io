<!DOCTYPE html>
<html lang="en-us">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <link rel="stylesheet" href="/css/syntax.css">
    
    <link rel="canonical" href="http://paulsec.github.io/posts/grafana-dashboard-for-my-blackstone-smoker/">
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.142.0">

    
    
    

<title>Grafana Dashboard for my Blackstone Smoker • </title>



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Grafana Dashboard for my Blackstone Smoker">
  <meta name="twitter:description" content="Before diving into the fun details, here is the full data flow of the setup. This shows the journey from the original Blackstone app to the final Grafana dashboard.
┌──────────────────┐ ┌──────────────────────────┐ │ Blackstone APK │ │ Hidden Blackstone API │ │ (reverse engineered)──────▶│ (backend endpoints) │ └──────────────────┘ └──────────────────────────┘ │ ▼ ┌────────────────┐ │ Python Script │ │ (collector) │ └────────────────┘ │ ▼ ┌──────────────────────────┐ │ Prometheus Remote Write │ │ via Grafana Cloud │ └──────────────────────────┘ │ ▼ ┌─────────────────────────┐ │ Grafana Dashboard │ │ (generated by Claude) │ └─────────────────────────┘ The Story I love my Blackstone smoker, but the official Blackstone Connect mobile app was a bit limited for what I wanted. It worked fine, but I could not get long term history, pretty graphs, alerts, or anything close to proper observability. Since I already use Grafana Cloud for a bunch of personal projects, putting the smoker data there became an obvious objective.">
      <meta name="twitter:site" content="@PaulWebSec">

<meta property="og:url" content="http://paulsec.github.io/posts/grafana-dashboard-for-my-blackstone-smoker/">
  <meta property="og:site_name" content="PaulSec&#39;s Blog">
  <meta property="og:title" content="Grafana Dashboard for my Blackstone Smoker">
  <meta property="og:description" content="Before diving into the fun details, here is the full data flow of the setup. This shows the journey from the original Blackstone app to the final Grafana dashboard.
┌──────────────────┐ ┌──────────────────────────┐ │ Blackstone APK │ │ Hidden Blackstone API │ │ (reverse engineered)──────▶│ (backend endpoints) │ └──────────────────┘ └──────────────────────────┘ │ ▼ ┌────────────────┐ │ Python Script │ │ (collector) │ └────────────────┘ │ ▼ ┌──────────────────────────┐ │ Prometheus Remote Write │ │ via Grafana Cloud │ └──────────────────────────┘ │ ▼ ┌─────────────────────────┐ │ Grafana Dashboard │ │ (generated by Claude) │ └─────────────────────────┘ The Story I love my Blackstone smoker, but the official Blackstone Connect mobile app was a bit limited for what I wanted. It worked fine, but I could not get long term history, pretty graphs, alerts, or anything close to proper observability. Since I already use Grafana Cloud for a bunch of personal projects, putting the smoker data there became an obvious objective.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-11-23T10:03:19-05:00">
    <meta property="article:modified_time" content="2025-11-23T10:03:19-05:00">


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/monokai.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.3081c4981fb69a2783dd36ecfdd0e6ba7a158d4cbfdd290ebce8f78ba0469fc6.css" integrity="sha256-MIHEmB&#43;2mieD3Tbs/dDmunoVjUy/3SkOvOj3i6BGn8Y=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="http://paulsec.github.io/">
        
          
        
        </a>
      </span>
      
        
        
        
        <div class="author-image">
          <img src="http://paulsec.github.io/img/profile.png" alt="Author Image" class="img--circle img--headshot element--center">
        </div>
        
      
      
      <p class="site__description">
         PaulSec&#39;s Blog. Security &amp; lulz. 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle"></label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/">
						<span>Home</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/@PaulWebSec" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	<a href="https://github.com/PaulSec" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2025 Paul A.
  
    <a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a>
  
</div>


<div class="builtwith">
Built with <a href="https://gohugo.io">Hugo</a> ❤️ <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
</div>


  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Grafana Dashboard for my Blackstone Smoker</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Nov 23, 2025
    
    
    
    
    
    <br/>
    <i class="fas fa-clock"></i> 6 min read
</div>


  </header>
  
  
  <div class="post">
    <p><img src="/img/smoker.jpg" alt="Smoker and Grafana is awesome"></p>
<p>Before diving into the fun details, here is the full data flow of the setup. This shows the journey from the original Blackstone app to the final Grafana dashboard.</p>
<pre tabindex="0"><code> ┌──────────────────┐        ┌──────────────────────────┐
 │  Blackstone APK   │        │  Hidden Blackstone API   │
 │ (reverse engineered)──────▶│ (backend endpoints)       │
 └──────────────────┘        └──────────────────────────┘
                                     │
                                     ▼
                            ┌────────────────┐
                            │  Python Script │
                            │  (collector)   │
                            └────────────────┘
                                     │
                                     ▼
                        ┌──────────────────────────┐
                        │  Prometheus Remote Write │
                        │   via Grafana Cloud      │
                        └──────────────────────────┘
                                     │
                                     ▼
                         ┌─────────────────────────┐
                         │      Grafana Dashboard  │
                         │  (generated by Claude)   │
                         └─────────────────────────┘
</code></pre><hr>
<h3 id="the-story">The Story</h3>
<p>I love my Blackstone smoker, but the official Blackstone Connect mobile app was a bit limited for what I wanted. It worked fine, but I could not get long term history, pretty graphs, alerts, or anything close to proper observability. Since I already use Grafana Cloud for a bunch of personal projects, putting the smoker data there became an obvious objective.</p>
<p>This turned into a fun mix of reverse engineering, API exploration, Python hacking, and finally dashboard building. The surprising part is that the final dashboard was generated automatically by Claude and worked perfectly without any edits.</p>
<p>Here is how everything came together.</p>
<hr>
<h3 id="reverse-engineering-the-blackstone-connect-app">Reverse engineering the Blackstone Connect App</h3>
<p>The first challenge was figuring out where the app gets its data. There is no public API documentation, and the APK does not openly expose anything.</p>
<p>So I pulled the APK from my phone, unpacked it, and looked at the network calls and code. Pretty quickly I found the back end. The app makes requests to a set of internal endpoints under:</p>
<pre tabindex="0"><code>https://backend.app.blackstoneconnect.com/meta/bulk
</code></pre><p>These endpoints return exactly what I needed:</p>
<ul>
<li>Current smoker temperature</li>
<li>Probe temperatures</li>
<li>Device status</li>
<li>Firmware information</li>
</ul>
<p>Inside the APK I found the authentication flow, including how the app exchanges a refresh token for a session token. That was the key. Once I reproduced that flow in Python, I could authenticate and fetch data the same way the official app does.</p>
<p>Here is the cleaned up authentication function:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_auth_token</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;Get authentication token from the Blackstone API.&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    auth_url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://backend.app.blackstoneconnect.com/meta/bulk&#34;</span>
</span></span><span style="display:flex;"><span>    auth_headers <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;Accept&#34;</span>: <span style="color:#e6db74">&#34;*/*&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;Content-Type&#34;</span>: <span style="color:#e6db74">&#34;application/json&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;User-Agent&#34;</span>: <span style="color:#e6db74">&#34;Python-Smoker-Monitor&#34;</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Scrubbed, originally came from the reversed APK</span>
</span></span><span style="display:flex;"><span>    auth_payload <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;request_1&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;/auth/token/simple&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;POST&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;body&#34;</span>: <span style="color:#e6db74">&#39;&#34;refresh/User/REDACTED_REFRESH_TOKEN&#34;&#39;</span>,
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        response <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>post(auth_url, headers<span style="color:#f92672">=</span>auth_headers, data<span style="color:#f92672">=</span>json<span style="color:#f92672">.</span>dumps(auth_payload))
</span></span><span style="display:flex;"><span>        data <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>json()
</span></span><span style="display:flex;"><span>        token <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#34;request_1&#34;</span>][<span style="color:#e6db74">&#34;result&#34;</span>]<span style="color:#f92672">.</span>strip(<span style="color:#e6db74">&#39;&#34;&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> token, auth_headers
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Failed to get auth token: </span><span style="color:#e6db74">{</span>e<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">None</span>, <span style="color:#66d9ef">None</span>
</span></span></code></pre></div><hr>
<h3 id="fetching-smoker-telemetry">Fetching Smoker Telemetry</h3>
<p>Once authenticated, the next step was fetching the actual data. The API returns a data structure containing the smoker temperature and up to four probes.</p>
<p>Here is the cleaned up version of that request:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_grill_data</span>(token, auth_headers):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;Fetch smoker telemetry from the Blackstone backend.&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://backend.app.blackstoneconnect.com/meta/bulk&#34;</span>
</span></span><span style="display:flex;"><span>    headers <span style="color:#f92672">=</span> auth_headers<span style="color:#f92672">.</span>copy()
</span></span><span style="display:flex;"><span>    headers[<span style="color:#e6db74">&#34;authorization&#34;</span>] <span style="color:#f92672">=</span> token
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    payload <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;request_telemetry&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;/pellet-grills/query&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;POST&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># Device ID scrubbed</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;body&#34;</span>: json<span style="color:#f92672">.</span>dumps({<span style="color:#e6db74">&#34;condition&#34;</span>: {<span style="color:#e6db74">&#34;_id&#34;</span>: {<span style="color:#e6db74">&#34;Inside&#34;</span>: [<span style="color:#e6db74">&#34;REDACTED_DEVICE_ID&#34;</span>]}}}),
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        response <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>post(url, headers<span style="color:#f92672">=</span>headers, data<span style="color:#f92672">=</span>json<span style="color:#f92672">.</span>dumps(payload))
</span></span><span style="display:flex;"><span>        data <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>json()
</span></span><span style="display:flex;"><span>        telemetry <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(data[<span style="color:#e6db74">&#34;request_telemetry&#34;</span>][<span style="color:#e6db74">&#34;result&#34;</span>])[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> telemetry
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Failed to retrieve data: </span><span style="color:#e6db74">{</span>e<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">None</span>
</span></span></code></pre></div><p>Most values come back in Celsius, so I added a helper:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">to_fahrenheit</span>(c):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> c <span style="color:#f92672">is</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (c <span style="color:#f92672">*</span> <span style="color:#ae81ff">9</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">5</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">32</span>
</span></span></code></pre></div><hr>
<h3 id="pushing-metrics-to-grafana-cloud">Pushing metrics to Grafana Cloud</h3>
<p>I wanted Prometheus style metrics, but Grafana Cloud also supports Influx line protocol via remote write. It is simple and works great for this use case.</p>
<p>Here is the cleaned snippet that creates the metrics and pushes them:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">send_to_grafana</span>(grill):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;Convert metrics into Influx line protocol and push to Grafana Cloud.&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    timestamp_ms <span style="color:#f92672">=</span> int(time<span style="color:#f92672">.</span>time() <span style="color:#f92672">*</span> <span style="color:#ae81ff">1000</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    metrics <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    current_f <span style="color:#f92672">=</span> to_fahrenheit(grill[<span style="color:#e6db74">&#34;currentTemperature&#34;</span>])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> current_f <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        metrics<span style="color:#f92672">.</span>append({
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;blackstone_smoker_temperature_f&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;value&#34;</span>: current_f,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;labels&#34;</span>: {<span style="color:#e6db74">&#34;job&#34;</span>: <span style="color:#e6db74">&#34;blackstone&#34;</span>, <span style="color:#e6db74">&#34;device&#34;</span>: <span style="color:#e6db74">&#34;smoker&#34;</span>},
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    probes <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;probe1&#34;</span>: grill<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;probe1Temperature&#34;</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;probe2&#34;</span>: grill<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;probe2Temperature&#34;</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;probe3&#34;</span>: grill<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;probe3Temperature&#34;</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;probe4&#34;</span>: grill<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;probe4Temperature&#34;</span>),
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> name, celsius <span style="color:#f92672">in</span> probes<span style="color:#f92672">.</span>items():
</span></span><span style="display:flex;"><span>        f <span style="color:#f92672">=</span> to_fahrenheit(celsius)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> f <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>            metrics<span style="color:#f92672">.</span>append({
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;blackstone_</span><span style="color:#e6db74">{</span>name<span style="color:#e6db74">}</span><span style="color:#e6db74">_temperature_f&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;value&#34;</span>: f,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;labels&#34;</span>: {<span style="color:#e6db74">&#34;job&#34;</span>: <span style="color:#e6db74">&#34;blackstone&#34;</span>, <span style="color:#e6db74">&#34;probe&#34;</span>: name},
</span></span><span style="display:flex;"><span>            })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    lines <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> m <span style="color:#f92672">in</span> metrics:
</span></span><span style="display:flex;"><span>        tags <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">.</span>join([<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>k<span style="color:#e6db74">}</span><span style="color:#e6db74">=</span><span style="color:#e6db74">{</span>v<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#66d9ef">for</span> k, v <span style="color:#f92672">in</span> m[<span style="color:#e6db74">&#34;labels&#34;</span>]<span style="color:#f92672">.</span>items()])
</span></span><span style="display:flex;"><span>        line <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">{</span>m[<span style="color:#e6db74">&#34;name&#34;</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">,</span><span style="color:#e6db74">{</span>tags<span style="color:#e6db74">}</span><span style="color:#e6db74"> value=</span><span style="color:#e6db74">{</span>m[<span style="color:#e6db74">&#34;value&#34;</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">{</span>timestamp_ms<span style="color:#e6db74">}</span><span style="color:#e6db74">000000&#39;</span>
</span></span><span style="display:flex;"><span>        lines<span style="color:#f92672">.</span>append(line)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    payload <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>join(lines)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Base URL is fine to show</span>
</span></span><span style="display:flex;"><span>    url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://prometheus-prod-01-eu-west-1.grafana.net/api/v1/push/influx/write&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    headers <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;Content-Type&#34;</span>: <span style="color:#e6db74">&#34;text/plain&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;Authorization&#34;</span>: <span style="color:#e6db74">&#34;Bearer GRAFANA_USERNAME:GRAFANA_API_KEY&#34;</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    r <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>post(url, headers<span style="color:#f92672">=</span>headers, data<span style="color:#f92672">=</span>payload)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> r<span style="color:#f92672">.</span>status_code <span style="color:#f92672">==</span> <span style="color:#ae81ff">204</span>
</span></span></code></pre></div><hr>
<h3 id="the-python-collector-loop">The Python collector loop</h3>
<p>Here is the simplified main loop that ties everything together.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Starting Blackstone Monitor&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    token, headers <span style="color:#f92672">=</span> get_auth_token()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> token:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;Unable to authenticate&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>        data <span style="color:#f92672">=</span> get_grill_data(token, headers)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> data:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#34;Data fetch failed, retrying auth...&#34;</span>)
</span></span><span style="display:flex;"><span>            token, headers <span style="color:#f92672">=</span> get_auth_token()
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Smoker: </span><span style="color:#e6db74">{</span>to_fahrenheit(data[<span style="color:#e6db74">&#39;currentTemperature&#39;</span>])<span style="color:#e6db74">}</span><span style="color:#e6db74"> F&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        ok <span style="color:#f92672">=</span> send_to_grafana(data)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> ok:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#34;Metrics sent&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#34;Failed to push metrics&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">60</span>)
</span></span></code></pre></div><p>The result is a clean, reliable data pipeline that runs every minute and pushes fresh metrics to Grafana Cloud.</p>
<hr>
<h3 id="building-the-dashboard-with-claude">Building the dashboard with Claude</h3>
<p>Once the metrics were flowing into Grafana Cloud, I originally planned to build a dashboard manually. But for fun, I asked Claude to generate the dashboard JSON instead.</p>
<p>Claude produced a complete, fully functional Grafana dashboard on the first try. I pasted the JSON into Grafana, saved it, and everything just worked. It included:</p>
<ul>
<li>A main smoker temperature graph</li>
<li>Panels for each probe</li>
<li>Clean labels and units</li>
<li>Sensible panel layout</li>
<li>Color choices that looked great without modifications</li>
</ul>
<p>I still cannot believe how quickly it came together.</p>
<hr>
<h3 id="and-what-does-it-look-like">And what does it look like?</h3>
<p>The final dashboard gives me:</p>
<ul>
<li>Real time temperature tracking</li>
<li>Full history of all smokes</li>
<li>Probe comparisons</li>
<li>Alerts when the smoker dips below my target</li>
<li>A clean overview I can check from anywhere</li>
</ul>
<p>What started as a curiosity became one of my favorite DIY monitoring projects.</p>
<p><img src="/img/grafana-dashboard.jpg" alt="Smoker and Grafana is awesome"></p>
<hr>
<h3 id="final-thoughts">Final thoughts</h3>
<p>This whole project combined reverse engineering, API discovery, Python scripting, Prometheus metrics, Grafana Cloud, and AI assisted dashboard creation. And honestly, having this data available opens the door to some really fun future ideas.</p>
<p>Now that I have structured time series data for every cook, there is potential for:</p>
<ul>
<li>Detecting when the hopper is running low on pellets based on temperature decay patterns</li>
<li>Predicting the stall phase during long smokes</li>
<li>Estimating time to completion for a brisket or pork shoulder</li>
<li>Spotting anomalies like sudden drops caused by windy conditions or lid openings</li>
<li>Building small AI agents that monitor trends and send playful alerts
like “Hey, looks like you&rsquo;re entering the stall, maybe grab a coffee”</li>
</ul>
<p>None of that was possible with the original Blackstone app. With the telemetry flowing into Grafana and stored long term, this becomes a proper data playground. It turns a normal smoker into something you can analyze, visualize, and even forecast.</p>
<p>This started as a curiosity and became one of my favorite DIY monitoring projects. If you love smoking food, tinkering with tech, or both, this is an incredibly fun rabbit hole to explore.</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/how-to-make-successful-teams-last/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">How to Make Successful Teams Last (or at least try to)</span>
    </a>
    
    
</div>


  

  


</article>


        </div>
        
    

<script defer src="https://use.fontawesome.com/releases/v5.12.1/js/all.js" integrity="sha384-ZbbbT1gw3joYkKRqh0kWyRp32UAvdqkpbLedQJSlnI8iLQcFVxaGyrOgOJiDQTTR" crossorigin="anonymous"></script>


    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
        
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    


    



    </body>
</html>
